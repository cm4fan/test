!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(1),a=n(r),o=i(3),s=n(o),u=i(4),l=n(u),d=i(7),c=n(d),f=i(9),p=i(6),m=n(p),h=i(10),y=n(h),b=new s.default;(0,y.default)(),window.hb_dmx_res={ssp:a.default,utils:b,collections:l.default,auction:c.default,activation:y.default,emit:f.emit,cookies:m.default}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),a=n(r),o=i(5),s=n(o),u={};u={dmx:s.default,an:a.default},t.default=u},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),a=n(r),o=i(4),s=n(o),u=new a.default,l=1908,d={constructor:function(){},parse:function(e){var t=document.createElement("script");t.src=e,t.async=!0;var i=document.getElementsByTagName("head")[0];i.appendChild(t)},jpt:function(e){var t=e.seat,i=e.params,n=e.auctionId,r="",a="http:"===document.location.protocol?"http://ib.adnxs.com/jpt?":"https://secure.adnxs.com/jpt?",o=n,s=0,l=t,d=t,c="window.hb_dmx_res.auction.reception",f="dm-pl-"+i.id;if(Array.isArray(i.sizes))var p=i.sizes[0],m=u.clean(i.sizes);var h=i.floor?parseFloat(i.floor).toFixed(2):"",y={memberId:l,member:d,callback_uid:o,psa:s,callback:c,code:f,size:p,promo_sizes:m,reserve:h};r=a;for(var b in y)("reserve"!==b||"reserve"===b&&""!==y[b])&&(r+=b+"="+y[b]+"&");r+="referrer="+encodeURIComponent(window.location.href),this.parse(r)},execute:function(e){var t=this;e.forEach(function(e){var i=u.generateId(30),n=e.params,r=e.placementCode,a=e.bidder,o="appnexus",d=u.clone({seat:l,auctionId:i,params:n,placementCode:r,bidder:a,ssp:o},e);s.default.register(d.auctionId,d),t.jpt(d)})}};t.default=d},function(e,t){"use strict";function i(e){return Array.isArray(e)?e:Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return r(e,[{key:"logger",value:function(e){try{window.localStorage.dmConsole===!0&&console.log("FROM DM LIBS: "+e)}catch(e){}}},{key:"ajax",value:function(e,t){}},{key:"removeComma",value:function(e){return e.replace(/,(\s+)?$/,"")}},{key:"generateId",value:function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}},{key:"clean",value:function(e){var t=i(e),n=(t[0],t.slice(1));return n}},{key:"clone",value:function(e,t){for(var i in t)e[i]=t[i];return e}},{key:"distribute",value:function(e){var t={};for(var i in e)t[i]=e[i];return t}}]),e}();t.default=a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),a=n(r),o=new a.default,s={col:{},win:[],collect:[],register:function(e,t){this.col[e]?o.logger(" "+e+" already register"):this.col[e]=t},update:function(e,t){if(this.col[e])for(var i in t)this.col[e][i]=t[i];else o.logger(e+" can't be updated")},select:function(e){return o.logger(e),this.col[e.auctionId]},selectById:function(e){return this.col[e]},selectField:function(e,t){return this.col[e][t]||"error"},selectWin:function(e){for(var t in e)this.win[e[t].placementCode]?this.win[e[t].placementCode].cpm<e[t].cpm&&(this.win[e[t].placementCode]=e[t]):this.win[e[t].placementCode]=e[t]}};t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(3),s=n(o),u=i(4),l=n(u),d=i(6),c=n(d),f=new s.default,p=function(){function e(){r(this,e),this.syncURL="https://cdn.districtm.io/ids/index.html",this.syncFlag=!1,this.syncCookieName="_dm_sync",this.bidCookieName="_dm_bid";try{window.addEventListener("message",function(e){e.data.districtmSync&&(f.logger("DistrictM post message",e.data.districtmSync),document.cookie=e.data.districtmSync+";path=/")})}catch(e){}}return a(e,[{key:"idsync",value:function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("iframe");t.src=this.syncURL,t.marginHeight="0",t.marginWidth="0",t.scrolling="no",t.setAttribute("style","display: none; border: 0px;"),t.width="0px",t.height="0px",e.appendChild(t)}},{key:"parse",value:function(e){var t=document.createElement("script");t.src=e,t.async=!0;var i=document.getElementsByTagName("head")[0];i.appendChild(t)}},{key:"jpt",value:function(e){var t="//rtb.districtm.io/bid?",i="",n="http:"===document.location.protocol?"http:":"https:",r="window.hb_dmx_res.auction.receptionDmx",a="",o=e.impid,s=e.reqid;try{"undefined"!=typeof localStorage.dmio_dmuid&&(a=localStorage.dmio_dmuid)}catch(e){a=""}var u=e.params.id,l=e.params.sizes[0],d=f.clean(e.params.sizes);try{e.params.floor&&(e.params.floor=parseFloat(e.params.floor).toFixed(2)>2?parseFloat(e.params.floor).toFixed(2):2)}catch(e){}var c=e.params.floor?parseFloat(e.params.floor).toFixed(2):parseFloat(0).toFixed(2),p={callback_function:r,id:u,size:l,promo_sizes:d,dmuid:a,floor:c,impid:o,reqid:s};i+=n+t;for(var m in p)i+=m+"="+p[m]+"&";i=i.substring(0,i.length-1),this.parse(i)}},{key:"execute",value:function(e){var t=this;c.default.get(this.bidCookieName)?e.forEach(function(e){var i=f.generateId(16),n=i,r=f.generateId(16),a="dmx",o=f.clone({reqid:i,auctionId:n,impid:r,ssp:a},e);l.default.register(n,o),t.jpt(o)}):e.forEach(function(e){var t=f.generateId(16),i=t,n=f.generateId(16),r="dmx",a=f.clone({reqid:t,auctionId:i,impid:n,ssp:r},e);l.default.register(i,a),window.hb_dmx_res.auction.receptionDmx({result:{id:e.params.id,reqid:i,cpm:"0.00",empty:!0}})}),c.default.get(this.syncCookieName)||this.syncFlag||(this.syncFlag=!0,this.idsync())}}]),e}();t.default=new p},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){i(this,e)}return r(e,[{key:"remove",value:function(e,t){this.register(e,"",this.extend(t,{expires:-1}))}},{key:"set",value:function(e,t,i){var n=void 0;if(i=this.extend({path:"/"},{},i),"number"==typeof i.expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*i.expires),i.expires=r}try{n=JSON.stringify(t),/^[\{\[]/.test(n)&&(t=n)}catch(e){}return t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",t,i.expires&&"; expires="+i.expires,i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}},{key:"get",value:function(e){if(!e)return!1;var t=document.cookie?document.cookie.split("; "):[],i=t.filter(function(t){var i=t.split("="),r=n(i,2),a=r[0],o=r[1];if(a===e)return o});return i.length>0}},{key:"update",value:function(e){var t=e.split(";"),i=n(t,2),r=i[0],a=i[1],o={expires:new Date(a.split("=")[1]).toUTCString()};this.set("_"+r.split("=")[0],r.split("=")[1],o)}},{key:"extend",value:function(){for(var e={},t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach(function(t){for(var i in t)e[i]=t[i]}),e}}]),e}();t.default=new a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(4),s=n(o),u=i(1),l=n(u),d=i(3),c=n(d),f=i(8),p=n(f),m=i(9),h=new c.default,y=function(){function e(t){r(this,e),this.bid=t}return a(e,[{key:"done",value:function(e){}},{key:"fixSize",value:function(e){var t=void 0;try{return t=Array.isArray(e[0])?e.map(function(e){return e[0]+"x"+e[1]}):[e[0]+"x"+e[1]]}catch(e){return["0x0"]}}},{key:"run",value:function(e,t,i){var n=i;i=function(){var e=Array.prototype.slice.call(arguments);e[0],e[1];n.apply(this,arguments)},window.hb_dmx_res.bh=i;window.hb_dmx_res.globalTimeout=t.timeout,this.returnToPB(window.hb_dmx_res.collections.col,window.hb_dmx_res.globalTimeout);for(var r in l.default)try{l.default[r].execute(t)}catch(e){h.logger("Error on "+r+" | error message: "+e.message+" 50 import auction")}}},{key:"setWin",value:function(){}},{key:"reception",value:function(e){window.location.href.indexOf("dmxTest=true")!==-1&&(e=function(e){var t=s.default.selectById(e.callback_uid),i=t.params.sizes[0],n=i.split("x")[0],r=i.split("x")[1],a=Math.floor(2e5*Math.random(2e5)),o=75542644,u=1,l=1,d=e.callback_uid,c="https://placeholdit.imgix.net/~text?txtsize=28&bg=fff455&txt="+n+"%C3%97"+r+"&w="+n+"&h="+r;return{callback_uid:d,result:{width:n,height:r,cpm:a,creative_id:o,media_type_id:u,media_subtype_id:l,ad:c}}}(e)),s.default.update(e.callback_uid,{response:e});var t=s.default.selectById(e.callback_uid).params.revShare,i=s.default.selectById(e.callback_uid).params.id,n=s.default.selectById(e.callback_uid),r={ssp:"appnexusDMX",winBid:parseFloat(n.response.result.cpm/1e4).toFixed(2),tieBreaker:0,zone:400,auctionId:n.response.callback_uid,adSize:n.response.result.width+"x"+n.response.result.height,domain:document.domain,id:n.response.callback_uid},a={ssp:"appnexus",winBid:Number((n.response.result.cpm/1e4).toFixed(2)),zone:400,dmtagid:String(i),auctionId:e.callback_uid,adSize:n.response.result.width+"x"+n.response.result.height,domain:document.domain},o={ssp:"appnexus",winBid:Number((n.response.result.cpm/1e4).toFixed(2)),zone:400,dmtagid:String(i),auctionId:e.callback_uid,adSize:n.response.result.width+"x"+n.response.result.height,domain:document.domain,source:"pbw"};this.done(n.ssp),t?e.result.cpm=parseFloat(e.result.cpm*t/1e4).toFixed(2):e.result.cpm=parseFloat(e.result.cpm/1e4).toFixed(2),e.result.banner='<iframe border="0" marginheight="0" marginwidth="0" scrolling="no" frameborder="0"  vspace="0" hspace="0" src="'+e.result.ad+'" width="'+e.result.width+'" height="'+e.result.height+'"></iframe>';var u=new p.default(r),l=new p.default(a),d=new p.default(o);e.result.banner+='<img src="'+u.run()+'" width="1" height="1" style="display:none;">',e.result.banner+='<img src="'+l.runNew()+'" width="1" height="1" style="display:none;">',e.result.banner+='<img src="'+d.runLast()+'" width="1" height="1" style="display:none;">',s.default.collect.push(s.default.selectById(e.callback_uid)),m.emit.register(n.placementCode,n),m.emit.setWinner(n.bidId)}},{key:"sendWinner",value:function(){}},{key:"receptionDmx",value:function(e){s.default.update(e.result.reqid,{response:e});var t=s.default.selectById(e.result.reqid),i=s.default.selectById(e.result.reqid).params.revShare;this.done(t.ssp);var n=e.result.dm_tracking_uri,r={ssp:"dmx",winBid:Number(e.result.cpm),slotName:e.reqid,adSize:""+e.result.size,domain:document.domain,auctionId:e.result.reqid,dmtagid:e.result.id},a={ssp:"dmx",winBid:Number(e.result.cpm),slotName:e.reqid,adSize:""+e.result.size,domain:document.domain,auctionId:e.result.reqid,dmtagid:e.result.id,source:"pbw"},o='<img src="'+n+'" width="1" height="1" style="display:none;">',u=new p.default(r),l=new p.default(a),d='<img src="'+u.runBust()+'" width="1" height="1" style="display:none;">';d+='<img src="'+l.runLast()+'" width="1" height="1" style="display:none;">',e.result.html&&(e.result.height=e.result.size.split("x")[1],e.result.width=e.result.size.split("x")[0],e.result.banner=""+e.result.html+o+d),i?e.result.cpm=parseFloat(e.result.cpm*i).toFixed(2):e.result.cpm=parseFloat(e.result.cpm).toFixed(2),s.default.collect.push(s.default.selectById(e.result.reqid)),m.emit.register(t.placementCode,t)}},{key:"returnToPB",value:function(e,t){setTimeout(function(){s.default.selectWin(e)},t)}}]),e}();t.default=new y},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-=",lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),toUtf8:function(e){var t,i=-1,n=e.length,r=[];if(/^[\x00-\x7f]*$/.test(e))for(;++i<n;)r.push(e.charCodeAt(i));else for(;++i<n;)t=e.charCodeAt(i),t<128?r.push(t):t<2048?r.push(t>>6|192,63&t|128):r.push(t>>12|224,t>>6&63|128,63&t|128);return r},encode:function(e){var t,i,n,r=this.toUtf8(e),a=-1,o=r.length,s=[,,,];if(this.ie){for(var u=[];++a<o;)t=r[a],i=r[++a],s[0]=t>>2,s[1]=(3&t)<<4|i>>4,isNaN(i)?s[2]=s[3]=64:(n=r[++a],s[2]=(15&i)<<2|n>>6,s[3]=isNaN(n)?64:63&n),u.push(this.alphabet.charAt(s[0]),this.alphabet.charAt(s[1]),this.alphabet.charAt(s[2]),this.alphabet.charAt(s[3]));return u.join("")}for(var u="";++a<o;)t=r[a],i=r[++a],s[0]=t>>2,s[1]=(3&t)<<4|i>>4,isNaN(i)?s[2]=s[3]=64:(n=r[++a],s[2]=(15&i)<<2|n>>6,s[3]=isNaN(n)?64:63&n),u+=this.alphabet[s[0]]+this.alphabet[s[1]]+this.alphabet[s[2]]+this.alphabet[s[3]];return u}},a=function(){function e(t){var n=t.adSize,r=t.ssp,a=t.winBid,o=t.tieBreaker,s=t.zone,u=t.slotName,l=t.domain,d=t.id,c=t.reqid,f=t.auctionId,p=t.dmtagid,m=t.adsize,h=t.source;i(this,e),this.imp={adSize:n,ssp:r,winBid:a,tieBreaker:o,zone:s,slotName:u,reqid:c,auctionId:f,dmtagid:p,adsize:m,domain:this.cleanDomain(l),id:d},this.imp2={adsize:n,ssp:r,winbid:a,zone:s,reqid:c,auctionid:f,dmtagid:p,domain:this.cleanDomain(l),id:d,source:h},this.link="//adx.districtm.ca/hi/impression/",this.newLink="//dmx.districtm.ca/ib/pbw/",this.bust="//dmx.districtm.ca/ib/pbw/",this.lastlink="//dmx.districtm.ca/i/"}return n(e,[{key:"forEach",value:function(e,t){}},{key:"cleanDomain",value:function(e){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}},{key:"run",value:function(){return""+this.link+r.encode(JSON.stringify(this.imp))}},{key:"runNew",value:function(){return""+this.newLink+r.encode(JSON.stringify(this.imp))}},{key:"runBust",value:function(){return""+this.bust+r.encode(JSON.stringify(this.imp))}},{key:"runLast",value:function(){return""+this.lastlink+r.encode(JSON.stringify(this.imp2))}}]),e}();t.default=a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emit=void 0;var r=i(4),a=n(r),o=i(3),s=n(o),u=new s.default;t.emit={list:{},eventName:["done","start"],placement:[],winner:[],bids:{},register:function(e,t){this.placement.push(t)},setWinner:function(e){this.bids[e]?this.bids[e]+=1:this.bids[e]=1,this.winner.push(this.placement.reduce(function(t,i){return e===i.bidId&&e===t.bidId?(i.adId=i.bidId,t.adId=t.bidId,Number(i.response.result.cpm)>=Number(t.response.result.cpm)?i:t):t},{response:{result:{cpm:"0.00"}},bidId:e})),this.winner.forEach(function(t){try{if(t.bidId===e){t.response.bidId=a.default.selectById(t.response.callback_uid).bidId;var i=u.distribute(a.default.selectById(t.response.callback_uid));i.bidId&&(delete a.default.col[t.response.callback_uid],window.hb_dmx_res.bh(t.response,i))}}catch(i){try{t.bidId===e&&window.hb_dmx_res.bh(t.response,a.default.selectById(t.response.result.reqid))}catch(e){}}})},listen:function(e,t){this.list[e]?this.list[e].push(t):(this.list[e]=[],this.list[e].push(t))},run:function(){}}},function(e,t){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}]);